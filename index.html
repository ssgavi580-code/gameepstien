<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>five days at epstien</title>
<style>
  body { margin:0; font-family: Arial; background: #0b132b; color: white; text-align: center;}
  #startScreen, #gameScreen { width:100%; height:100vh; display:flex; flex-direction: column; justify-content: center; align-items: center;}
  button { padding: 12px 20px; font-size:18px; border:none; border-radius:25px; background:#5bc0be; color:#000; cursor:pointer; margin-top:15px; }
  canvas { background:#1c2541; border-radius:15px; display:block; margin:10px auto; }
  #controls button { font-size:22px; padding:12px 18px; margin:5px; border-radius:50%; border:none; background:#5bc0be; }
  #score { font-size:20px; margin-top:10px; }
</style>
</head>

<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
<div id="startScreen">
  <h1>five night at epstien </h1>
  <p>ØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ø§Ù† Ø²Ø±Ø§ÙˆÙ„ÙŠØ©</p>
  <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
<div id="gameScreen" style="display:none;">
  <canvas id="game" width="300" height="500"></canvas>
  <div id="score">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>
  <div id="controls">
    <button onclick="moveLeft()">â¬…ï¸</button>
    <button onclick="moveRight()">â¡ï¸</button>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let carImg = new Image();
carImg.src = "car.png"; // ØµÙˆØ±Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø©

let obstaclesImg = [
  "obstacle1.png",
  "obstacle2.png",
  "obstacle3.png"
].map(src => { let img = new Image(); img.src = src; return img; });

let car, obstacles, score, gameInterval, keys = {};
let roadOffset = 0;

// Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
function startGame(){
  document.getElementById("startScreen").style.display = "none";
  document.getElementById("gameScreen").style.display = "flex";
  init();
}

function init(){
  car = {x:130, y:420, width:50, height:90};
  obstacles = [];
  score = 0;
  roadOffset = 0;
  document.getElementById("score").innerText = "Ø§Ù„Ù†Ù‚Ø§Ø·: 0";
  clearInterval(gameInterval);
  gameInterval = setInterval(gameLoop, 50);
}

// ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// Ø£Ø²Ø±Ø§Ø± Ù„Ù…Ø³
function moveLeft(){ car.x -= 15; if(car.x<0) car.x=0; }
function moveRight(){ car.x += 15; if(car.x+car.width>canvas.width) car.x=canvas.width-car.width; }

// Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø¨Ø§Øª
function createObstacle(){
  let width = Math.floor(Math.random()*60)+40;
  let x = Math.floor(Math.random()*(canvas.width-width));
  let type = Math.floor(Math.random()*obstaclesImg.length);
  obstacles.push({x:x, y:-50, width:width, height:30, img:obstaclesImg[type]});
}

// Ø±Ø³Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚
function drawRoad(){
  ctx.fillStyle = "#333";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Ø®Ø·ÙˆØ· Ø§Ù„Ø·Ø±ÙŠÙ‚ Ù…ØªØ­Ø±ÙƒØ©
  roadOffset +=5;
  if(roadOffset>40) roadOffset = 0;

  ctx.fillStyle = "white";
  for(let i=0;i<canvas.height/40;i++){
    ctx.fillRect(canvas.width/2-2, i*40+roadOffset, 4, 20);
  }
}

// Ø§Ù„Ù„Ø¹Ø¨Ø©
function gameLoop(){
  drawRoad();

  // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯
  if(keys['ArrowLeft']) moveLeft();
  if(keys['ArrowRight']) moveRight();

  // Ø±Ø³Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©
  ctx.drawImage(carImg, car.x, car.y, car.width, car.height);

  // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
  if(Math.random()<0.03) createObstacle();

  // Ø±Ø³Ù… ÙˆØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª
  for(let i=obstacles.length-1;i>=0;i--){
    let ob = obstacles[i];
    ob.y +=5;
    ctx.drawImage(ob.img, ob.x, ob.y, ob.width, ob.height);

    // ØªØµØ§Ø¯Ù…
    if(car.x < ob.x + ob.width && car.x + car.width > ob.x &&
       car.y < ob.y + ob.height && car.y + car.height > ob.y){
      clearInterval(gameInterval);
      setTimeout(()=>{ alert("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø© ğŸ˜…\nØ§Ù„Ù†Ù‚Ø§Ø·: "+score); location.reload(); },10);
    }

    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´Ø§Ø´Ø©
    if(ob.y>canvas.height) obstacles.splice(i,1);
  }

  score++;
  document.getElementById("score").innerText = "Ø§Ù„Ù†Ù‚Ø§Ø·: " + score;
}
</script>

</body>
</html>